{
    "dag_id": "inventory_navi_store_return_to_vendor_lifecycle",
    "dag_schedule": "15 8 * * *",
    "prod_email_on_failure": "nap-sco-high-pri@nordstrom.pagerduty.com",
    "nonprod_email_on_failure": "",
    "stages": [
        "main"
    ],
    "main": {
        "job_1_td_batch_start": {
            "teradata_engine": {
                "input_details": [
                    {
                        "conn_name": "__TERADATA_NAP_FCT__",
                        "scripts": [
                            "inventory_navi_store_return_to_vendor_lifecycle/start_batch.sql"
                        ]
                    }
                ]
            }
        },
        "job_2_load_avro_td_stg": {
            "spark_engine": {
                "spark_run_mode": "high",
                "scripts": [
                    "inventory_navi_store_return_to_vendor_lifecycle/kafka_avro_to_td_stg.sql"
                ],
                "input_details": [
                    {
                        "conn_name": "__KAFKA_STORE_RETURN_TO_VENDOR_LIFECYCLE__",
                        "sql_table_reference": "kafka_inventory_store_return_to_vendor_object_model_avro",
                        "data_source_name": "inventory-navi-store-return-to-vendor-lifecycle-analytical-avro"
                    }
                ],
                "output_details": [
                    {
                        "conn_name": "__S3_ERROR_SINK__",
                        "sql_table_reference": "inventory_navi_store_return_to_vendor_created"
                    },
                    {
                        "conn_name": "__S3_ERROR_SINK__",
                        "sql_table_reference": "inventory_navi_store_return_to_vendor_canceled"
                    },
                    {
                        "conn_name": "__S3_ERROR_SINK__",
                        "sql_table_reference": "inventory_navi_store_return_to_vendor_shipped"
                    },
                    {
                        "conn_name": "__TERADATA_NAP_STG__",
                        "sql_table_reference": "inventory_navi_store_return_to_vendor_lifecycle_ldg_table",
                        "data_source_name": "INVENTORY_NAVI_STORE_RETURN_TO_VENDOR_LIFECYCLE_LDG"
                    }
                ]
            }
        },
        "job_3_td_stg_to_fact": {
            "teradata_engine": {
                "input_details": [
                    {
                        "conn_name": "__TERADATA_NAP_FCT__",
                        "scripts": [
                            "inventory_navi_store_return_to_vendor_lifecycle/td_stg_to_fact.sql"
                        ]
                    }
                ]
            }
        },
        "job_4_td_fact_dqc": {
            "teradata_engine": {
                "retries": 0,
                "input_details": [
                    {
                        "conn_name": "__TERADATA_NAP_FCT__",
                        "scripts": [
                            "inventory_navi_store_return_to_vendor_lifecycle/td_fact_dqc.sql"
                        ]
                    }
                ]
            }
        },
        "job_5_td_batch_end": {
            "teradata_engine": {
                "input_details": [
                    {
                        "conn_name": "__TERADATA_NAP_FCT__",
                        "scripts": [
                            "inventory_navi_store_return_to_vendor_lifecycle/end_batch.sql"
                        ]
                    }
                ]
            }
        }
    }
}