{
    "dag_id": "marketing_mix_model_s3_copy",
    "dag_schedule": "00 17 * * 3",
    "dag_sla_minutes": "90",
    "prod_email_on_failure": "nap-marketing@nordstrom.pagerduty.com",
    "nonprod_email_on_failure": "varun.miranda@nordstrom.com",
    "dependencies": {
        "upstream": {
            "dags": [
                {
                    "external_dag_id": "marketing_mix_model_inventory_merch_kpi_teradata_6761_DAS_MARKETING_das_marketing_insights",
                    "external_task_id": "tpt_marketing_mix_model_inventory_merch_kpi_job_export_export_tbl",
                    "execution_delta": "timedelta(hours=5)",
                    "allowed_states": [
                        "success"
                    ],
                    "failed_states": [
                        "failed"
                    ],
                    "timeout": 7200,
                    "poke_interval": 60
                },
                {
                    "external_dag_id": "marketing_mix_model_customer_kpi_teradata_6761_DAS_MARKETING_das_marketing_insights",
                    "external_task_id": "tpt_marketing_mix_model_customer_kpi_job_export_export_tbl",
                    "execution_delta": "timedelta(hours=5)",
                    "allowed_states": [
                        "success"
                    ],
                    "failed_states": [
                        "failed"
                    ],
                    "timeout": 7200,
                    "poke_interval": 60
                },
                {
                    "external_dag_id": "marketing_mix_model_finance_kpi_teradata_6761_DAS_MARKETING_das_marketing_insights",
                    "external_task_id": "tpt_marketing_mix_model_gross_sales_gross_sales_job_export_export_tbl",
                    "execution_delta": "timedelta(hours=5)",
                    "allowed_states": [
                        "success"
                    ],
                    "failed_states": [
                        "failed"
                    ],
                    "timeout": 7200,
                    "poke_interval": 60
                },
                {
                    "external_dag_id": "marketing_mix_model_finance_kpi_teradata_6761_DAS_MARKETING_das_marketing_insights",
                    "external_task_id": "tpt_marketing_mix_model_net_sales_net_sales_job_export_export_tbl",
                    "execution_delta": "timedelta(hours=5)",
                    "allowed_states": [
                        "success"
                    ],
                    "failed_states": [
                        "failed"
                    ],
                    "timeout": 7200,
                    "poke_interval": 60
                },
                {
                    "external_dag_id": "marketing_mix_model_traffic_kpi_teradata_6761_DAS_MARKETING_das_marketing_insights",
                    "external_task_id": "tpt_marketing_mix_model_traffic_kpi_job_export_export_tbl",
                    "execution_delta": "timedelta(hours=5)",
                    "allowed_states": [
                        "success"
                    ],
                    "failed_states": [
                        "failed"
                    ],
                    "timeout": 7200,
                    "poke_interval": 60
                },
                {
                    "external_dag_id": "marketing_mix_model_store_realestate_teradata_6761_DAS_MARKETING_das_marketing_insights",
                    "external_task_id": "tpt_marketing_mix_model_store_realestate_job_export_export_tbl",
                    "execution_delta": "timedelta(hours=5)",
                    "allowed_states": [
                        "success"
                    ],
                    "failed_states": [
                        "failed"
                    ],
                    "timeout": 7200,
                    "poke_interval": 60
                },
                {
                    "external_dag_id": "marketing_mix_model_store_hrs_teradata_6761_DAS_MARKETING_das_marketing_insights",
                    "external_task_id": "tpt_marketing_mix_model_store_hrs_job_export_export_tbl",
                    "execution_delta": "timedelta(hours=5)",
                    "allowed_states": [
                        "success"
                    ],
                    "failed_states": [
                        "failed"
                    ],
                    "timeout": 7200,
                    "poke_interval": 60
                },
                {
                    "external_dag_id": "marketing_mix_model_loyalty_redemption_teradata_6761_DAS_MARKETING_das_marketing_insights",
                    "external_task_id": "tpt_marketing_mix_model_loyalty_redemption_job_export_export_tbl",
                    "execution_delta": "timedelta(hours=5)",
                    "allowed_states": [
                        "success"
                    ],
                    "failed_states": [
                        "failed"
                    ],
                    "timeout": 7200,
                    "poke_interval": 60
                },
                {
                    "external_dag_id": "marketing_mix_model_delivery_speed_teradata_6761_DAS_MARKETING_das_marketing_insights",
                    "external_task_id": "tpt_marketing_mix_model_delivery_speed_job_export_export_tbl",
                    "execution_delta": "timedelta(hours=5)",
                    "allowed_states": [
                        "success"
                    ],
                    "failed_states": [
                        "failed"
                    ],
                    "timeout": 7200,
                    "poke_interval": 60
                },
                {
                    "external_dag_id": "marketing_mix_model_customer_satisfaction_teradata_6761_DAS_MARKETING_das_marketing_insights",
                    "external_task_id": "tpt_marketing_mix_model_customer_satisfaction_job_export_export_tbl",
                    "execution_delta": "timedelta(hours=5)",
                    "allowed_states": [
                        "success"
                    ],
                    "failed_states": [
                        "failed"
                    ],
                    "timeout": 7200,
                    "poke_interval": 60
                }
            ]
        }
    },
    "stages": [
        "s3_bucket_csv_files_copy"
    ],
    "s3_bucket_csv_files_copy": {
        "to_s3_path_folders": {
            "python_executor": {
                "module": "python/utils",
                "version": "1.3.18",
                "args": [
                    "python/utils/src/bulk_s3_copy.py",
                    "--s3_source_bucket_env_name",
                    "S3_MMM_BUCKET",
                    "--s3_target_bucket_env_name",
                    "S3_OPTIMINE_BUCKET",
                    "--source_to_target_path_pair",
                    "{'source': 'Nordstrom/Outbound/delta_load/weekly_refresh/year=<year>/month=<month>/day=<day>/', 'target': 'Nordstrom/Outbound/'}"
                ]
            }
        }
    }
}