{
    "dag_id": "nap_inactive_vndr_extract",
    "dag_schedule": "0 14 * * 1",
    "timezone": "US/Pacific",
    "prod_email_on_failure": "ds-vendor@nordstrom.pagerduty.com",
    "nonprod_email_on_failure": "techvndrmdmdvtsttm@nordstrom.com",
    "stages": [
        "JOB_0_1",
        "JOB_0_2"
    ],
    "stage_dependencies": {
        "JOB_0_1": "JOB_0_2"
    },
    "JOB_0_1": {
        "EXPORT_INACTIVE_VENDORS": {
            "tpt_engine": {
                "input_details": [
                    {
                        "conn_name": "__TPT_SOURCE__",
                        "text_delimiter_hexa_flag": "'Y'",
                        "text_delimiter": "01",
                        "quoted_flag": "N",
                        "quoted_data": "''",
                        "table_name": "NVMS_INACTIVE_VENDOR",
                        "database_name": "{db_env}_NAP_USR_VWS",
                        "s3_file_path": "s3://{tpt_bucket_name}/inactive_vendor_status/inactive_vendors.csv",
                        "sql_file_name": "nap_inactive_vendor_extract.sql"
                    }
                ],
                "output_details": []
            }
        }
    },
    "JOB_0_2": {
        "INACTIVATE_VENDOR_STATUS": {
            "python_executor": {
                "module": "python_modules/inactive_vendor",
                "version": "0.0.20",
                "args": [
                    "python_modules/inactive_vendor/main.py"
                ],
                "k8s_cpu_limit": 5,
                "k8s_cpu_request": 3,
                "k8s_memory_limit": "6Gi",
                "k8s_memory_request": "2Gi"
            }
        }
    }
}